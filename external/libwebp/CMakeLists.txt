cmake_minimum_required(VERSION 3.9 FATAL_ERROR)

include(FetchContent)

if (NOT TARGET libwebp)
	set(WEBP_LINK_STATIC ON CACHE BOOL "" FORCE)
	set(WEBP_BUILD_ANIM_UTILS OFF CACHE BOOL "" FORCE)
	set(WEBP_BUILD_CWEBP OFF CACHE BOOL "" FORCE)
	set(WEBP_BUILD_DWEBP OFF CACHE BOOL "" FORCE)
	set(WEBP_BUILD_GIF2WEBP OFF CACHE BOOL "" FORCE)
	set(WEBP_BUILD_IMG2WEBP OFF CACHE BOOL "" FORCE)
	set(WEBP_BUILD_VWEBP OFF CACHE BOOL "" FORCE)
	set(WEBP_BUILD_WEBPINFO OFF CACHE BOOL "" FORCE)
	set(WEBP_BUILD_LIBWEBPMUX ON CACHE BOOL "" FORCE)
	set(WEBP_BUILD_WEBPMUX OFF CACHE BOOL "" FORCE)
	set(WEBP_BUILD_EXTRAS OFF CACHE BOOL "" FORCE)
	set(WEBP_BUILD_WEBP_JS OFF CACHE BOOL "" FORCE)
	set(WEBP_USE_THREAD ON CACHE BOOL "" FORCE)

	FetchContent_Declare(libwebp
		GIT_REPOSITORY https://github.com/webmproject/libwebp
		GIT_TAG v1.3.2
		FIND_PACKAGE_ARGS
	)
	FetchContent_MakeAvailable(libwebp)
endif()

#add_subdirectory(./libwebp EXCLUDE_FROM_ALL)

